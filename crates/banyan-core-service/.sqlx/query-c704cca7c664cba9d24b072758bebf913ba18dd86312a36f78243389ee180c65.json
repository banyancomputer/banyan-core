{
  "db_name": "SQLite",
  "query": "\n                UPDATE storage_hosts\n                SET reserved_storage = \n                COALESCE(\n\t                (\n                        SELECT SUM(sg.authorized_amount)\n\t                    FROM storage_hosts sh\n\t                    INNER JOIN (\n                            SELECT a.user_id, a.storage_host_id, a.redeemed_at, a.authorized_amount \n                            FROM storage_grants a\n                            WHERE a.redeemed_at IN (\n                                SELECT MAX(b.redeemed_at)\n                                FROM storage_grants b\n                                WHERE a.user_id = b.user_id\n                            )\n                            GROUP BY a.id\n\t                    ) AS sg \n\t                    WHERE sg.storage_host_id = sh.id \n                        AND sh.id = $1\n                    ), \n                0)\n                WHERE id = $1;\n            ",
  "describe": {
    "columns": [],
    "parameters": {
      "Right": 1
    },
    "nullable": []
  },
  "hash": "c704cca7c664cba9d24b072758bebf913ba18dd86312a36f78243389ee180c65"
}
